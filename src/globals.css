@import "tailwindcss";
@import "tw-animate-css";
@import "shadcn/tailwind.css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-exo2);
  --font-mono: var(--font-press-start);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);

  /* Game design tokens */
  --color-bg-page: var(--bg-page);
  --color-bg-card: var(--bg-card);
  --color-bg-input: var(--bg-input);
  --color-accent-gold: var(--accent-gold);
  --color-accent-red: var(--accent-red);
  --color-text-primary: var(--text-primary);
  --color-text-secondary: var(--text-secondary);
  --color-text-muted: var(--text-muted);
  --color-text-dim: var(--text-dim);
  --color-border-card: var(--border-card);
  --color-border-active-gold: var(--border-active-gold);
  --color-border-active-green: var(--border-active-green);
  --color-border-active-red: var(--border-active-red);
  --color-hp-high: var(--hp-high);
  --color-hp-mid: var(--hp-mid);
  --color-hp-low: var(--hp-low);
  --color-resource-rage: var(--resource-rage);
  --color-resource-energy: var(--resource-energy);
  --color-resource-mana: var(--resource-mana);
  --color-stat-bar: var(--stat-bar);
  --color-xp-bar: var(--xp-bar);
  --color-branch-protection: var(--branch-protection);
  --color-branch-arms: var(--branch-arms);
  --color-branch-warrior-core: var(--branch-warrior-core);
  --color-branch-shadow: var(--branch-shadow);
  --color-branch-precision: var(--branch-precision);
  --color-branch-survival: var(--branch-survival);
  --color-branch-rogue-core: var(--branch-rogue-core);

  /* LEGO launcher tokens */
  --color-lego-red: var(--lego-red);
  --color-lego-blue: var(--lego-blue);
  --color-lego-yellow: var(--lego-yellow);
  --color-lego-green: var(--lego-green);
  --color-lego-panel: var(--lego-panel);
  --color-lego-border: var(--lego-border);

  /* Profession colors */
  --color-prof-knight: var(--prof-knight);
  --color-prof-knight-accent: var(--prof-knight-accent);
  --color-prof-rogue: var(--prof-rogue);
  --color-prof-rogue-accent: var(--prof-rogue-accent);
  --color-prof-wizard: var(--prof-wizard);
  --color-prof-wizard-accent: var(--prof-wizard-accent);
  --color-prof-healer: var(--prof-healer);
  --color-prof-healer-accent: var(--prof-healer-accent);
  --color-prof-ranger: var(--prof-ranger);
  --color-prof-ranger-accent: var(--prof-ranger-accent);
  --color-prof-inventor: var(--prof-inventor);
  --color-prof-inventor-accent: var(--prof-inventor-accent);

  /* Extra UI tokens */
  --color-bg-deep: var(--bg-deep);
  --color-bg-surface: var(--bg-surface);
  --color-text-gold: var(--text-gold);
  --color-text-title: var(--text-title);
  --color-card-bg: var(--card-bg);
  --color-card-border: var(--card-border);
  --color-border-glow: var(--border-glow);

  /* Font families */
  --font-display: var(--font-press-start);
  --font-body: var(--font-exo2);
}

:root {
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

.dark {
  /* shadcn overrides — deep purple game palette */
  --background: #0d0221;
  --foreground: #f0e6ff;
  --card: #1a0a3e;
  --card-foreground: #f0e6ff;
  --popover: #1a0a3e;
  --popover-foreground: #f0e6ff;
  --primary: #ffd700;
  --primary-foreground: #0d0221;
  --secondary: #261454;
  --secondary-foreground: #f0e6ff;
  --muted: #261454;
  --muted-foreground: #8b7aaa;
  --accent: #261454;
  --accent-foreground: #f0e6ff;
  --destructive: #e74c3c;
  --border: rgba(255, 255, 255, 0.08);
  --input: #261454;
  --ring: rgba(255, 204, 0, 0.3);
  --chart-1: #ffd700;
  --chart-2: #e74c3c;
  --chart-3: #3498db;
  --chart-4: #2ecc71;
  --chart-5: #8e44ad;
  --sidebar: #1a0a3e;
  --sidebar-foreground: #f0e6ff;
  --sidebar-primary: #ffd700;
  --sidebar-primary-foreground: #0d0221;
  --sidebar-accent: #261454;
  --sidebar-accent-foreground: #f0e6ff;
  --sidebar-border: rgba(255, 255, 255, 0.08);
  --sidebar-ring: rgba(255, 204, 0, 0.3);

  /* Game design tokens — deep purple */
  --bg-page: #0d0221;
  --bg-card: #1a0a3e;
  --bg-input: #261454;
  --bg-deep: #0d0221;
  --bg-surface: #261454;
  --accent-gold: #ffd700;
  --accent-red: #e74c3c;
  --text-primary: #f0e6ff;
  --text-secondary: #8b7aaa;
  --text-muted: #6b5a8a;
  --text-dim: #4a3a6a;
  --text-gold: #ffd700;
  --text-title: #ffcc00;
  --border-card: rgba(255, 255, 255, 0.08);
  --border-active-gold: rgba(255, 204, 0, 0.3);
  --border-active-green: #2ecc71;
  --border-active-red: #e74c3c;
  --border-glow: rgba(255, 204, 0, 0.3);
  --card-bg: rgba(26, 10, 62, 0.85);
  --card-border: rgba(255, 255, 255, 0.08);
  --hp-high: #2ecc71;
  --hp-mid: #f1c40f;
  --hp-low: #e74c3c;
  --resource-rage: #c0392b;
  --resource-energy: #f1c40f;
  --resource-mana: #9b59b6;
  --stat-bar: #3498db;
  --xp-bar: #3498db;
  --branch-protection: #3498db;
  --branch-arms: #e74c3c;
  --branch-warrior-core: #8e44ad;
  --branch-shadow: #6366F1;
  --branch-precision: #2ecc71;
  --branch-survival: #84CC16;
  --branch-rogue-core: #8e44ad;

  /* Profession colors */
  --prof-knight: #c0392b;
  --prof-knight-accent: #f1c40f;
  --prof-rogue: #1abc9c;
  --prof-rogue-accent: #2c3e50;
  --prof-wizard: #8e44ad;
  --prof-wizard-accent: #3498db;
  --prof-healer: #f39c12;
  --prof-healer-accent: #ecf0f1;
  --prof-ranger: #27ae60;
  --prof-ranger-accent: #e67e22;
  --prof-inventor: #d35400;
  --prof-inventor-accent: #95a5a6;

  /* LEGO launcher tokens */
  --lego-red: #E3000B;
  --lego-blue: #0055BF;
  --lego-yellow: #F2CD37;
  --lego-green: #237841;
  --lego-panel: #1e1e1e;
  --lego-border: #333333;
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-exo2), ui-sans-serif, system-ui, sans-serif;
  }
  h1, h2, h3, .section-title {
    font-family: var(--font-press-start), monospace;
  }
}

/* Game background animations */
@keyframes twinkle {
  0%, 100% { opacity: 0.3; }
  50% { opacity: 0.9; }
}

@keyframes float-drift {
  0% { transform: translateY(0) rotate(0deg); opacity: 0; }
  10% { opacity: 0.3; }
  50% { transform: translateY(-50vh) rotate(20deg); opacity: 0.5; }
  90% { opacity: 0.2; }
  100% { transform: translateY(-110vh) rotate(40deg); opacity: 0; }
}

@keyframes pulse-glow {
  0%, 100% { box-shadow: 0 0 10px rgba(var(--glow-rgb, 255 204 0), 0.3); }
  50% { box-shadow: 0 0 25px rgba(var(--glow-rgb, 255 204 0), 0.6); }
}

@keyframes slide-up-fade {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}

.animate-twinkle {
  animation: twinkle 3s ease-in-out infinite;
}

.animate-float-drift {
  animation: float-drift linear infinite;
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

.animate-slide-up {
  animation: slide-up-fade 0.5s ease-out both;
}

@keyframes avatar-bob {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-2px); }
}

.animate-avatar-bob {
  animation: avatar-bob 3s ease-in-out infinite;
}

@keyframes bounce-gentle {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-3px); }
}

.animate-bounce-gentle {
  animation: bounce-gentle 3s ease-in-out infinite;
}

/* Battle results animations */
@keyframes battle-slide-down {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes banner-glow {
  0%, 100% { text-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }
  50% { text-shadow: 0 0 25px rgba(255, 215, 0, 0.6), 0 0 50px rgba(255, 215, 0, 0.2); }
}

@keyframes level-pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.15); }
  100% { transform: scale(1); }
}

@keyframes crit-flash {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

@keyframes confetti-fall {
  0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}

.animate-battle-slide-down {
  animation: battle-slide-down 0.6s ease;
}

.animate-banner-glow {
  animation: banner-glow 2s ease infinite;
}

.animate-level-pulse {
  animation: level-pulse 0.6s ease;
}

.animate-crit-flash {
  animation: crit-flash 1s ease infinite;
}

.animate-confetti-fall {
  animation: confetti-fall 2s ease forwards;
}